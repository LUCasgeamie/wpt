<!doctype html>
<html>
<head>
  <title>Contextual Role Verification Tests</title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
  <script src="/resources/testdriver.js"></script>
  <script src="/resources/testdriver-vendor.js"></script>
  <script src="/resources/testdriver-actions.js"></script>
  <script src="/wai-aria/scripts/aria-utils.js"></script>
</head>
<body>

<p>Verifies Required Context Roles from <a href="https://www.w3.org/TR/wai-aria-1.2/#scope">5.2.7 Required Context Role</a></p>
<p>Also verifies Required Owned Roles from <a href="https://www.w3.org/TR/wai-aria-1.2/#mustContain">5.2.6 Required Owned Role</a></p>

<!-- Notes for "required context" testing:

- See Computed Role for more details on role computation when an element lacks required context: 
https://w3c.github.io/core-aam/#roleMappingComputedRole 

- See ARIA 1.2 spec for full listing of "Required Context Role" for each element:
https://www.w3.org/TR/wai-aria-1.2/

Identified roles with "Required Context" excluding abstract roles (e.g., child -> parent):

- caption -> {figure, grid, table, treegrid}
- cell -> row
- columnheader -> row
- gridcell -> row
- listitem -> {list, directory} *Note: directory role is deprecated as of ARIA 1.2
- menuitem -> {group, menu, menubar}
- menuitemcheckbox -> {group, menu, menubar}
- menuitemradio -> {group, menu, menubar}
- option -> {group, listbox}
- row -> {grid, rowgroup, table, treegrid}
- rowgroup -> {grid, table, treegrid}
- rowheader -> row
- tab -> tablist
- treeitem -> {group, tree}

-->

<!-- Testing orphaned caption -->
<p role="caption" data-testname="orphan p with caption role" data-expectedrole="paragraph" class="ex">x</p>

<!-- Testing orphaned table semantics -->
<span role="cell" data-testname="orphan span with cell role" class="ex-generic">x</span>
<span role="rowgroup" data-testname="orphan span with rowgroup role" class="ex-generic">x</span>
<span role="columnheader" data-testname="orphan span with columnheader role" class="ex-generic">x</span>
<span role="rowheader" data-testname="orphan span with rowheader role" class="ex-generic">x</span>
<span role="row" data-testname="orphan span with row role" class="ex-generic">x</span>

<!-- Testing orphaned list semantics -->
<div role="listitem" data-testname="orphan div with listitem role" class="ex-generic">x</div>
<p role="listitem" data-testname="orphan p with listitem role" data-expectedrole="paragraph" class="ex">x</p>

<!-- Testing orphaned grid semantics -->
<button role="gridcell" data-testname="orphan button with gridcell role" data-expectedrole="button" class="ex">x</button>
<span role="gridcell" data-testname="orphan span with gridcell role" class="ex-generic">x</span>

<!-- Testing orphaned menu semantics -->
<button role="menuitemcheckbox" data-testname="orphan button with menuitemcheckbox role" data-expectedrole="button" class="ex">x</button>
<button role="menuitemradio" data-testname="orphan button with menuitemradio role" data-expectedrole="button" class="ex">x</button>
<div role="menuitemcheckbox" data-testname="orphan div with menuitemcheckbox role" class="ex-generic">x</div>
<div role="menuitemradio" data-testname="orphan div with menuitemradio role" class="ex-generic">x</div>

<!-- Testing orphaned group/listbox semantics -->
<span role="option" data-testname="orphan span with option role" class="ex-generic">x</span>

<script>
    AriaUtils.verifyRolesBySelector(".ex");
    AriaUtils.verifyGenericRolesBySelector(".ex-generic");
</script>

</body>
</html>